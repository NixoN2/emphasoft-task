var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;import{u as o,D as c,R as m,H as i,S as u,a as d,b as p}from"./vendor.3b398486.js";const h=()=>{const e=o(),[i,u]=c.exports.useState({user:"",password:""}),[d,p]=c.exports.useState(!1),[h,w]=c.exports.useState(!1),[x,g]=c.exports.useState(!1),[b,v]=c.exports.useState(!1),f=e=>{var o,c;u((o=((e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))s.call(t,r)&&l(e,r,t[r]);return e})({},i),c={[e.target.name]:e.target.value},t(o,r(c)))),"user"===e.target.name&&e.target.value&&p(!1),"password"===e.target.name&&e.target.value&&w(!1)},E=e=>{e.preventDefault(),g(!x)};return m.createElement("div",{className:"w-screen h-screen bg-gradient-to-tr from-bright-turquoise to-electric-violet pt-20"},m.createElement("form",{className:"container mx-auto pt-6 bg-white w-96 h-96 md:w-128 md:h-104 rounded-xl"},m.createElement("h2",{className:"text-center text-5xl"},"Вход"),d||h||b?m.createElement("section",{className:"ml-8 mr-8 mt-4 pl-4 h-14 pt-1 bg-red-400 rounded-xl"},d&&m.createElement("p",{className:"text-md"},"Отсутствует логин"),h&&m.createElement("p",{className:"text-md"},"Отсутствует пароль"),b&&m.createElement("p",{className:"text-md"},"Неверные данные")):null,m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-gray-400 h-6 w-6 absolute ml-10 mt-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),m.createElement("input",{placeholder:"Введите логин:",className:`focus:outline-none focus:border-bright-turquoise pl-8 text-xl w-80 md:w-112 h-12 border-2 ${d?"border-red-500":"border-black"} rounded-xl ml-8 mt-4`,onChange:f,type:"text",id:"user",name:"user"}),m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-gray-400 h-6 w-6 absolute ml-10 mt-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})),x?m.createElement("svg",{onClick:E,xmlns:"http://www.w3.org/2000/svg",className:"cursor-pointer h-6 w-6 absolute ml-76 md:ml-108 mt-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})):m.createElement("svg",{onClick:E,xmlns:"http://www.w3.org/2000/svg",className:"cursor-pointer h-6 w-6 absolute ml-76 md:ml-108 mt-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),m.createElement("input",{placeholder:"Введите пароль:",className:`focus:outline-none  focus:border-bright-turquoise pl-8 text-xl w-80 md:w-112 h-12 pr-12 border-2 ${h?"border-red-500":"border-black"} rounded-xl ml-8 mt-4`,onChange:f,type:x?"text":"password",id:"password",name:"password"}),m.createElement("div",{className:"flex"},m.createElement("button",{onClick:async t=>{t.preventDefault(),i.user||p(!0),i.password||w(!0),i.password&&i.user&&(await(async(e,t,r={})=>{await fetch(e,{headers:{"Content-Type":"application/json"},method:t,body:JSON.stringify(r)}).then((e=>{if(200==e.status)return v(!1),e.body;v(!0)})).then((e=>{const t=e.getReader();return new ReadableStream({start(e){!function r(){t.read().then((({done:t,value:a})=>{t?e.close():(e.enqueue(a),r())}))}()}})})).then((e=>new Response(e,{headers:{"Content-Type":"text/html"}}).text())).then((e=>{window.localStorage.setItem("token",JSON.parse(e).token)}))})("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/","POST",{username:i.user,password:i.password}),e.push("users"))},className:"mx-auto text-white text-2xl rounded-full mt-8 md:mt-16 bg-gradient-to-tr from-bright-turquoise to-electric-violet w-64 h-14"},"Войти"))))},w=({user:e})=>{var t,r;return m.createElement("div",{className:"w-full border-t-2 pl-4"},m.createElement("p",{className:"text-lg text-bright-turquoise flex"},"Пользователь: ",e.username," ",e.is_superuser?m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})):null," ",m.createElement("span",{className:"ml-4 text-electric-violet"},e.id)),(e.first_name||e.last_name)&&m.createElement("p",{className:""},"Имя Фамилия: ",e.first_name," ",e.last_name),e.last_login&&m.createElement("p",null,"Последний вход: ",null==(t=e.last_login)?void 0:t.split("T")[0]," - ",null==(r=e.last_login)?void 0:r.split("T")[1].split(".")[0]))},x=e=>{const[t,r]=c.exports.useState(null),[a,n]=c.exports.useState([]),s=localStorage.getItem("token");return c.exports.useEffect((async()=>{await(async(e,t)=>{try{await fetch(e,{headers:{"Content-Type":"application/json",Authorization:`Token ${s}`},method:t}).then((e=>e.body)).then((e=>{const t=e.getReader();return new ReadableStream({start(e){!function r(){t.read().then((({done:t,value:a})=>{t?e.close():(e.enqueue(a),r())}))}()}})})).then((e=>new Response(e,{headers:{"Content-Type":"text/html"}}).text())).then((e=>{r(JSON.parse(e)),n(JSON.parse(e))}))}catch(a){return a}})("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/","GET")}),[]),m.createElement("div",{className:"w-screen h-screen bg-gradient-to-tr from-bright-turquoise to-electric-violet pt-2 overflow-y-hidden"},m.createElement("h1",{className:"text-center mb-4 text-4xl text-white"},"Пользователи"),m.createElement("div",{className:"flex justify-center"},m.createElement("input",{onChange:e=>{n(t.filter((t=>t.username.includes(e.target.value))))},placeholder:"Поиск:",className:"focus:outline-none focus:ring-2 focus:ring-bright-turquoise text-xl pl-4  w-96 md:w-128 h-10",type:"text"})),m.createElement("div",{className:"flex"},m.createElement("button",{onClick:e=>{n(t.sort(((e,t)=>e.id<t.id?-1:1)))},className:"mx-auto w-64 md:w-72 bg-white mt-4 h-12 rounded-xl text-xl"},"Отсортировать")),m.createElement("main",{className:"mt-4 pr-4 max-h-96 md:max-h-128 scrollbar scrollbar-thumb-black scrollbar-track-gray-200 overflow-y-scroll container mx-auto bg-white w-96 md:w-144"},a&&a.map(((e,t)=>m.createElement(w,{key:`${e.id}-${t}`,user:e})))))};function g(){return m.createElement("div",null,m.createElement(i,{basename:"/"},m.createElement(u,null,m.createElement(d,{path:"/users"},m.createElement(x,null)),m.createElement(d,{path:"/"},m.createElement(h,null)))))}p.render(m.createElement(m.StrictMode,null,m.createElement(g,null)),document.getElementById("root"));
